# ---------------------------------------------------------------------------
# logging.conf – Python logging configuration for Password Manager
#
# Loaded at runtime by  backend/core/logger.py  via logging.config.fileConfig
# All paths (log files) are resolved by logger.py before the config is applied,
# so the %(log_dir)s placeholder below is replaced programmatically.
# ---------------------------------------------------------------------------

[loggers]
keys = root,pasmgr

[handlers]
keys = file,console

[formatters]
keys = standard

# ---------------------------------------------------------------------------
# Formatters
# ---------------------------------------------------------------------------
[formatter_standard]
format  = %(asctime)s [%(levelname)s] %(name)s – %(message)s
datefmt = %Y-%m-%d %H:%M:%S

# ---------------------------------------------------------------------------
# Handlers
# ---------------------------------------------------------------------------

# -- Rotating file handler -------------------------------------------------
# maxBytes   – rotate when the file reaches this size (bytes)
# backupCount – how many old files to keep  (app.log.1 … app.log.N)
# Total max disk usage = maxBytes × (backupCount + 1)
#
# Size calculation:
#   1 KB = 1024 bytes
#   1 MB = 1024 × 1024 = 1,048,576 bytes
#   5 MB = 5 × 1,048,576 = 5,242,880 bytes
#   10 MB = 10 × 1,048,576 = 10,485,760 bytes
#   50 MB = 50 × 1,048,576 = 52,428,800 bytes
#
[handler_file]
class    = logging.handlers.RotatingFileHandler
level    = DEBUG
formatter = standard
# args tuple: (filepath, mode, maxBytes, backupCount)
# %(log_file)s is replaced by logger.py with the absolute path before parsing
# Current: 5,242,880 bytes = 5 MB per file, keep 3 backups = 20 MB total
args     = ("%(log_file)s", "a", 5242880, 3)

# -- Console (stderr) handler ---------------------------------------------
[handler_console]
class     = StreamHandler
level     = INFO
formatter = standard
args      = (sys.stderr,)

# ---------------------------------------------------------------------------
# Loggers
# ---------------------------------------------------------------------------

# root – catches anything not claimed by a named logger
[logger_root]
level    = WARNING
handlers = console

# pasmgr – the application logger; everything we emit goes here
[logger_pasmgr]
level    = DEBUG
handlers = file,console
qualname = pasmgr
propagate = 0
